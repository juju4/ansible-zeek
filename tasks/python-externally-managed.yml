---

# https://www.jeffgeerling.com/blog/2023/how-solve-error-externally-managed-environment-when-installing-pip3
- name: Ignore PEP 668
  ansible.builtin.file:
    path: "/usr/lib/python{{ zeek_python_version | default('3.12') }}/EXTERNALLY-MANAGED"
    state: absent
  when: >
    (ansible_facts['distribution'] == 'Ubuntu' and ansible_facts['distribution_major_version']|int >= 24) or
    (ansible_facts['distribution'] == 'Debian' and ansible_facts['distribution_major_version']|int >= 12)
